[% pageHeaderScriptsDISABLED = BLOCK %]
<script type="text/javascript" src="/plugins/SpotifyProtocolHandler/html/selftest.js?r=[% jsver %]"></script>
[% END %]

[% PROCESS settings/header.html %]

	[% IF not hide_banner %]

		[% WRAPPER setting title="PLUGIN_SPOTIFY_BANNER" %]
			<div>[% "PLUGIN_SPOTIFY_BANNER_TEXT" | string %]</div>
		[% END %]

	[% END %]

	[% IF not agree %]

		[% WRAPPER setting title="PLUGIN_SPOTIFY_EULA" %]
			<div>[% "PLUGIN_SPOTIFY_EULA_TEXT1" | string %]</div>
			<div>[% "PLUGIN_SPOTIFY_EULA_TEXT2" | string %]</div>
		[% END %]
		[% WRAPPER setting %]
			<div><input name="agree" type="checkbox"> [% "PLUGIN_SPOTIFY_EULA_TEXT3" | string %]</div>
		[% END %]
		[% WRAPPER setting %]
			[% "PLUGIN_SPOTIFY_EULA_TEXT4" | string %]
		[% END %]

	[% ELSE %]	

	[% WRAPPER setting title="PLUGIN_SPOTIFY_USERNAME" desc="PLUGIN_SPOTIFY_USERNAME_DESC" %]
		<input type="text" class="stdedit" name="username" id="username" value="[% username %]" size="40">
	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_PASSWORD" desc="PLUGIN_SPOTIFY_PASSWORD_DESC" %]
		<input type="password" class="stdedit" name="password" id="password" value="[% password %]" size="40">
	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_BITRATE" desc="PLUGIN_SPOTIFY_BITRATE_DESC" %]
		<select class="stdedit" name="bitrate" id="bitrate">
		[% FOREACH value = [ "96" "160" "320" ] %]
			<option [% IF value == bitrate %]selected[% END %] value="[% value %]">[% "PLUGIN_SPOTIFY_BITRATE_$value" | string %]</option>
		[% END %]
		</select>
	[% END %]

	[% IF show_volnorm %]
		[% WRAPPER setting title="PLUGIN_SPOTIFY_VOLNORM" desc="PLUGIN_SPOTIFY_VOLNORM_DESC" %]
			<input type="checkbox" name="volnorm" [% IF volnorm %] checked [% END %]>
		[% END %]
	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_NOCACHE" desc="PLUGIN_SPOTIFY_NOCACHE_DESC" %]
		<input type="checkbox" name="nocache" [% IF nocache %] checked [% END %]>
	[% END %]

	[% IF otherhandler %]

		[% WRAPPER setting title="PLUGIN_SPOTIFY_NO_OTHER_STREAMING" desc="PLUGIN_SPOTIFY_NO_OTHER_STREAMING_DESC" %]
			<input type="checkbox" name="nootherstreaming" [% IF nootherstreaming %] checked [% END %]>
		[% END %]

	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_PORT" desc="PLUGIN_SPOTIFY_PORT_DESC" %]
		<input type="text" class="stdedit" name="httpport" id="httpport" value="[% httpport %]" size="40">
	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_LOG" desc="PLUGIN_SPOTIFY_LOG_DESC" %]
		<select class="stdedit" name="loglevel" id="loglevel">
		[% FOREACH value = [ "OFF" "ERROR" "WARN" "INFO" "DEBUG" "SDEBUG" ] %]
			<option [% IF value == loglevel %]selected[% END %] value="[% value %]">[% "SETUP_DEBUG_LEVEL_$value" | string %]</option>
		[% END %]
		</select>
		<a href="/spotifyd.log" target="log">[% "PLUGIN_SPOTIFY_LOGLINK" | string %]</a>
	[% END %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_HELPERNAME" desc="PLUGIN_SPOTIFY_HELPERNAME_DESC" %]
		<div>[% helpername %]</div>
	[% END %]	

<!-- 	[% WRAPPER setting title="PLUGIN_SPOTIFY_TEST" desc="PLUGIN_SPOTIFY_TEST_DESC" %]
		<div id="test"></div>
		<div id="button"><button type="button" onclick="startSelfTest('[% spotifyduri %]', '[% player %]')">[% "PLUGIN_SPOTIFY_START" | string %]</button></div>
	[% END %] -->

	[% WRAPPER setting title="PLUGIN_SPOTIFY_STATUS" sectionID="helperapp" %]
		
		<div>[% "PLUGIN_SPOTIFY_HELPER" | string %][% "COLON" | string %] [% IF running %][% "PLUGIN_SPOTIFY_RUNNING" | string %][% ELSE %][% "PLUGIN_SPOTIFY_NOTRUNNING" | string %][% END %]</div>

		[% IF status %]
		<div>[% IF status.logged_in %][% "PLUGIN_SPOTIFY_LOGGEDIN" | string %][% ELSE %][% "PLUGIN_SPOTIFY_NOTLOGGEDIN" | string %][% END %]</div>
		<div>[% "PLUGIN_SPOTIFY_LOGINERR" | string %][% "COLON" | string %] [% status.login_error %]</div>
		<div>[% "PLUGIN_SPOTIFY_LASTERR"  | string %][% "COLON" | string %] [% status.last_error %]</div>
		[% END %]

	[% END %]

	[% IF hint %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_HINT" sectionID="hint" %]
		
		<div>[% hint %]</div>

	[% END %]

	[% END %]	

	[% IF status %]

	[% WRAPPER setting title="PLUGIN_SPOTIFY_STATS" sectionID="status" %]

		<div>[% "PLUGIN_SPOTIFY_STREAM" | string %][% "COLON" | string %] [% status.stream %]</div>
		<div>[% "PLUGIN_SPOTIFY_PREFETCH" | string %][% "COLON" | string %] [% status.prefetch %]</div>
		<div>[% "PLUGIN_SPOTIFY_RELOGIN" | string %][% "COLON" | string %] [% status.relogin %]</div>
		<div>[% "PLUGIN_SPOTIFY_RATELIMIT" | string %][% "COLON" | string %] [% status.rate_limit %]</div>

	[% END %]

	[% WRAPPER setting title = "PLUGIN_SPOTIFY_API" sectionID="api" %]
		<div>[% status.api %]</div>
	[% END %]	

	[% END %]

	[% END %]

[% PROCESS settings/footer.html %]
